(this["webpackJsonpcryptocurrency-tracker"]=this["webpackJsonpcryptocurrency-tracker"]||[]).push([[0],{18:function(e,t,n){e.exports=n(35)},23:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(6);n(23),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=n(4),o=n(2),u=n(13),s=n(1),l={symbol:"Symbol",cmcRank:"CMC Rank",price:"Price",action:"Remove"},d=function(e,t,n){return e.sort((function(e,r){var c=e[t],a=r[t];return n?c>a?-1:c<a?1:0:c<a?-1:c>a?1:0}))},m={addingLimitReached:!1,items:[],loading:!1,error:null};var p=Object(i.c)({cryptocurrencies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_CRYPTOCURRENCIES_BEGIN":return Object(s.a)(Object(s.a)({},e),{},{loading:!0,error:null});case"FETCH_CRYPTOCURRENCIES_SUCCESS":return Object(s.a)(Object(s.a)({},e),{},{loading:!1,items:Object.values(t.payload.cryptocurrencies).map((function(e,t){return{id:e.id,cmcRank:0,symbol:e.symbol,price:0,isInTrackTable:t<5}}))});case"FETCH_QUOTES_SUCCESS":return Object(s.a)(Object(s.a)({},e),{},{loading:!1,items:e.items.map((function(e){var n,r=Object.values(t.payload.quotes).find((function(t){return e.id===t.id}));r&&(e.cmcRank=r.cmc_rank,e.price=null===(n=r.quote)||void 0===n?void 0:n.USD.price);return e}))});case"FETCH_CRYPTOCURRENCIES_FAILURE":return Object(s.a)(Object(s.a)({},e),{},{loading:!1,error:t.payload.error,items:[]});case"TOGGLE_DISPLAY":return Object(s.a)(Object(s.a)({},e),{},{addingLimitReached:!1,items:e.items.map((function(e){return e.id===t.id?Object(s.a)(Object(s.a)({},e),{},{isInTrackTable:!e.isInTrackTable}):e}))});case"SORT_BY_KEY":return Object(s.a)(Object(s.a)({},e),{},{items:d(e.items,t.key,t.isAscending)});case"ADD_LIMIT_REACHED":return Object(s.a)(Object(s.a)({},e),{},{addingLimitReached:!0});default:return e}}}),f=n(3),y=n.n(f),E=n(5),b=function(e){return{type:"TOGGLE_DISPLAY",id:e}};function h(e){return function(){var t=Object(E.a)(y.a.mark((function t(n){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(C()),t.abrupt("return",fetch("https://www.stackadapt.com/coinmarketcap/quotes?id=".concat(e.join())).then(v).then((function(e){return e.json()})).then((function(e){return n(k(e.data)),e.data})).catch((function(e){return n(R(e))})));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function v(e){if(!e.ok)throw Error(e.statusText);return e}var C=function(){return{type:"FETCH_CRYPTOCURRENCIES_BEGIN"}},O=function(e){return{type:"FETCH_CRYPTOCURRENCIES_SUCCESS",payload:{cryptocurrencies:e}}},k=function(e){return{type:"FETCH_QUOTES_SUCCESS",payload:{quotes:e}}},R=function(e){return{type:"FETCH_CRYPTOCURRENCIES_FAILURE",payload:{error:e}}},j=n(14),g=n(15),w=n(17),T=n(16),_=(n(31),n(32),n(7)),I=function(e){var t=e.sortByKey,n=Object(r.useState)(!1),a=Object(_.a)(n,2),i=a[0],o=a[1];return c.a.createElement("tr",null,Object.keys(l).map((function(e,n){return"Remove"!==l[e]?c.a.createElement("th",{key:n},c.a.createElement("div",{className:"cryptocurrency-table__header-wrapper"},l[e],c.a.createElement("div",{className:"cryptocurrency-table__sorting-wrapper",onClick:function(){o(!i),t(e,i)}},c.a.createElement("i",{className:"arrow up"}),c.a.createElement("i",{className:"arrow down"})))):c.a.createElement("th",{key:n})})))},S=Object(o.b)(null,(function(e){return{sortByKey:function(t,n){return e(function(e,t){return{type:"SORT_BY_KEY",key:e,isAscending:t}}(t,n))}}}))(I),L=function(e){var t=e.rows,n=e.removeRow;return t.map((function(e){var r=e.id,a=e.cmcRank,i=e.symbol,o=e.price;return c.a.createElement("tr",{key:r},c.a.createElement("td",null,i),c.a.createElement("td",null,a),c.a.createElement("td",null,o),t.length>1?c.a.createElement("td",{onClick:n.bind(void 0,r)},"Remove"):c.a.createElement("td",{className:"disabled"},"Remove"))}))},N=Object(o.b)((function(e){return{rows:e.cryptocurrencies.items.filter((function(e){return e.isInTrackTable}))}}),(function(e){return{removeRow:function(t){return e(b(t))}}}))(L),A=function(){return c.a.createElement("table",{id:"cryptocurrency-table"},c.a.createElement("tbody",null,c.a.createElement(S,null),c.a.createElement(N,null)))},U=(n(33),n(34),Object(o.b)((function(e){return{cryptocurrencies:e.cryptocurrencies.items}}),(function(e){return{addCryptocurrency:function(t){return e(b(t))},getQuote:function(t){return e(h(t))},preventAdding:function(){return e({type:"ADD_LIMIT_REACHED",payload:{addingLimitReached:t}});var t}}}))((function(e){var t=e.addListItems,n=e.cryptocurrencies,r=e.addCryptocurrency,a=e.getQuote,i=e.preventAdding,o=n.filter((function(e){return e.isInTrackTable})),u=function(){var e=Object(E.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o.length<10)){e.next=6;break}return e.next=3,a([t.id]);case 3:r(t.id),e.next=7;break;case 6:i();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement("ul",null,t.map((function(e){return c.a.createElement("li",{key:e.id,onClick:u.bind(void 0,e)},e.symbol)})))}))),Y=function(e){var t=Object(r.useState)(!1),n=Object(_.a)(t,2),a=n[0],i=n[1],o=Object(r.useCallback)((function(e){e.preventDefault(),i(!a)}),[a]);Object(r.useEffect)((function(){if(a)return document.addEventListener("click",o),function(){document.removeEventListener("click",o)}}),[a,o]);var u=e.menuItems,s=e.addingLimitReached;return c.a.createElement("div",{className:"dropdown-container"},c.a.createElement("div",{className:"dropdown"},c.a.createElement("div",{className:"dropdown__button ".concat(a?"show":""),onClick:o},"Add Cryptocurrency"),a&&u.length>0?c.a.createElement(U,{addListItems:u}):null),s&&c.a.createElement("p",{className:"dropdown__error"},"Can't add more than 10 items"))};Y.defaultProps={menuItems:[]};var D=Y,F=function(e){Object(w.a)(n,e);var t=Object(T.a)(n);function n(){var e;Object(j.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).fetchCryptocurrencies=function(){e.props.fetchCryptocurrencies()},e}return Object(g.a)(n,[{key:"componentDidMount",value:function(){this.fetchCryptocurrencies()}},{key:"render",value:function(){var e=this.props,t=e.error,n=e.cryptocurrencies,r=e.addingLimitReached,a=e.loading;return c.a.createElement("div",{className:"app-container"},c.a.createElement("h1",{className:"app-container__title"},"Cryptocurrency Tracker"),a&&c.a.createElement("p",{className:"loading"},"Loading..."),t?c.a.createElement("div",{className:"error-container"},"Error!"," ",t.message,c.a.createElement("button",{className:"fetch-button",onClick:this.fetchCryptocurrencies},"Try Again")):c.a.createElement("div",null,c.a.createElement(D,{menuItems:n.filter((function(e){return!e.isInTrackTable})),addingLimitReached:r}),c.a.createElement(A,null)))}}]),n}(r.Component),H=Object(o.b)((function(e){return{cryptocurrencies:e.cryptocurrencies.items,loading:e.cryptocurrencies.loading,error:e.cryptocurrencies.error,addingLimitReached:e.cryptocurrencies.addingLimitReached}}),(function(e){return{fetchCryptocurrencies:function(){return e(function(){var e=Object(E.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(C()),e.abrupt("return",fetch("https://www.stackadapt.com/coinmarketcap/map").then(v).then((function(e){return e.json()})).then((function(e){return t(h([1,2,3,4,5])),t(O(e.data)),e.data})).catch((function(e){return t(R(e))})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}}))(F),P=Object(i.d)(p,Object(i.a)(u.a));Object(a.render)(c.a.createElement(o.a,{store:P},c.a.createElement(H,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[18,1,2]]]);
//# sourceMappingURL=main.a21217cf.chunk.js.map